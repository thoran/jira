#!/usr/bin/env ruby
# jira

# 20220420
# 0.1.0

require 'Git/Branch'

def sub_domain
  ARGV[0]
end

def current_branch_name
  Git::Branch.current.name
end

def jira_issue_id
  if md = current_branch_name.match(/^(.+-\d+)_/)
    md[1]
  end
end

def jira_url
  "https://#{sub_domain}.atlassian.net/browse/#{jira_issue_id}"
end

def main
  open(jira_url)
end

main
